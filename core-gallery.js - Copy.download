!function(e,n){mbrAppCore.regExtension({name:"core-gallery",global:{setGallery:function(n){const t=e("[data-app-component-id="+n._id+"] > .app-component-content .mbr-gallery");if(t.length){const e=t.find(".row.mbr-gallery");e.length&&function(e,n){for(var t=e.getElementsByTagName("img"),a=t.length,o=0;o<t.length;o++)t[o].complete?a--:t[o].addEventListener("load",(function(){0==--a&&n()})),0==a&&n()}(e[0],(function(){t.trigger("change.cards")}))}const a=e("[data-app-component-id="+n._id+"] > .app-component-content .row.mbr-masonry");if(a.length){const e=new Masonry(a[0],{});setTimeout((function(){e.layout()}),100)}},publishGallery:function(e,n){n.find("[data-app-component-id="+e._id+"] > .app-component-content .mbr-gallery-item>div").attr("data-toggle","modal")}},events:{loadedComponent:function(e,n,t,a){this.setGallery(e,t),a&&this.publishGallery(e,t)},saveMediaImageDialog:(e,n,t)=>{setTimeout((function(){mbrAppCore.$body.find('.app-component[data-app-component-id="'+t+'"] .mbr-gallery').trigger("change.cards")}),100)},summernoteFocus:n=>{e(n).parents("[data-app-component-id]:eq(0)").find(".row.mbr-masonry").length&&e(n).parents("div.item").addClass("editing")},summernoteBlur:n=>{e(n).parents("[data-app-component-id]:eq(0)").find(".row.mbr-masonry").length&&(e(n).parents("div.item").removeClass("editing"),mbrAppCore.render(e(n).parents("[data-app-component-id]:eq(0)").attr("data-app-component-id")))},rivetsBlur:n=>{e(n).parents("[data-app-component-id]:eq(0)").find(".row.mbr-masonry").length&&(e(n).parents("div.item").removeClass("editing"),mbrAppCore.render(e(n).parents("[data-app-component-id]:eq(0)").attr("data-app-component-id")))},savedCodeEditor:e=>{mbrAppCore.$body.find('.app-component[data-app-component-id="'+e+'"] .row.mbr-masonry').length&&mbrAppCore.render(e)}}})}(jQuery);